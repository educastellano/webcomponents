<script>
	(function() {
		var ENTER_KEY = 13;
		var ESC_KEY = 27;
		var event_commit = new Event('td-input-commit');
		var event_cancel = new Event('td-input-cancel');

		// element prototype
		//
		var proto = Object.create(HTMLInputElement.prototype, {
			createdCallback: {
				value: function () {
					console.log('input created!')
					this.addEventListener('keypress', onKeyPress);
					this.addEventListener('keyup', onKeyUp);
				}
			}
		});
	
		// Private methods
		//
		var onKeyPress = function (e) {
			if (e.keyCode === ENTER_KEY) {
				this.dispatchEvent(event_commit);
			}
		}

		var onKeyUp = function (e) {
				if (e.keyCode === ESC_KEY) {
				this.dispatchEvent(event_cancel);
			}
		}

		// register element
		//
		document.registerElement('td-input', {
			extends: 'input',
		  	prototype: proto
		});
	})();
</script>

